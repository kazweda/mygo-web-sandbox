# GitHub Copilot Instructions: mygo-web-sandbox

Concise, project-specific guidance to help AI coding agents be productive immediately in this Go + templ static site sandbox.

## Big Picture
- Pseudo-SSG: generate static HTML at build time using Go and `templ`.
- Content source: fetch a GitHub Issue body (JSON) for `Location`, then fetch weather from Open-Meteo.
- Render: `templates.Page(loc, weather)` writes to `docs/index.html` for GitHub Pages.

## Key Files
- cmd/build/main.go — fetches data (GitHub Issue, Open-Meteo) and renders HTML.
- templates/page.templ — canonical templ component + `Location` / `Weather` types. Edit here.
- templates/page_templ.go — generated by templ. Do not edit.
- Makefile — tasks: `generate` (templ), `build` (generate + run), `clean`.
- README.md — setup, purpose, and safe usage notes.

## Developer Workflow
- Install templ CLI:
  ```bash
  go install github.com/a-h/templ/cmd/templ@latest
  ```
- Build & generate:
  ```bash
  make build
  # or
  make generate && go run ./cmd/build
  ```
- Output is written to `docs/index.html`; commit this for GitHub Pages publishing.

## Data Inputs (GitHub Issue)
- `main.go` reads `issueOwner`, `issueRepo`, `issueID` and GETs `/repos/:owner/:repo/issues/:id`.
- Issue body JSON format (preferred within a fenced ```json block):
  ```json
  {
    "location": {
      "Name": "Osaka",
      "Lat": 34.672314,
      "Lon": 135.484802
    }
  }
  ```
- Fallback: whole body parsed as JSON if no fenced block detected.
- Auth/rate limits: set `GITHUB_TOKEN` in env to avoid GitHub API rate limits.

## External Integrations
- GitHub Issues API: Accept header `application/vnd.github+json`, 30s timeout.
- Open-Meteo API: `current_weather=true` with `latitude` and `longitude`.
- Weather code mappings are in `main.go` (`weatherCodeText`, `weatherCodeEmoji`). Update here if expanding support.

## Conventions & Patterns
- Edit `.templ` files; re-run `templ generate`. Never hand-edit generated `.go`.
- Minimal styling via Pico.css CDN; no client-side JS.
- Errors are propagated and `panic` at the top-level of `main`. Keep functions returning `error` for predictable failure handling.
- Output directory is `docs` to align with GitHub Pages. Keep paths consistent when adding pages.

## Common Tasks
- Change content source: update `issueOwner`, `issueRepo`, `issueID` in `cmd/build/main.go`.
- Add fields to the page: extend types in `templates/page.templ`, re-generate, and render.
- Add more pages/components: define new `templ` components in `.templ` files and write additional build steps to render them into `docs/`.
- Debug API calls: check status codes and limited body reads in `main.go`; set `GITHUB_TOKEN` locally.
